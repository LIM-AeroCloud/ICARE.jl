<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Download · ICARE.jl Documentation</title><meta name="title" content="Download · ICARE.jl Documentation"/><meta property="og:title" content="Download · ICARE.jl Documentation"/><meta property="twitter:title" content="Download · ICARE.jl Documentation"/><meta name="description" content="Documentation for ICARE.jl Documentation."/><meta property="og:description" content="Documentation for ICARE.jl Documentation."/><meta property="twitter:description" content="Documentation for ICARE.jl Documentation."/><meta property="og:url" content="https://LIM-AeroCloud.github.io/ICARE.jl/download.html"/><meta property="twitter:url" content="https://LIM-AeroCloud.github.io/ICARE.jl/download.html"/><link rel="canonical" href="https://LIM-AeroCloud.github.io/ICARE.jl/download.html"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="ICARE.jl Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">ICARE.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="download.html">Download</a><ul class="internal"><li><a class="tocitem" href="#Synchronising-folder-structure"><span>Synchronising folder structure</span></a></li><li><a class="tocitem" href="#Downloading-data-files"><span>Downloading data files</span></a></li><li><a class="tocitem" href="#Converting-data-files"><span>Converting data files</span></a></li></ul></li><li><a class="tocitem" href="adaptation.html">Adaptation</a></li><li><a class="tocitem" href="release-notes.html">Release notes</a></li><li><a class="tocitem" href="register.html">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="download.html">Download</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="download.html">Download</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/LIM-AeroCloud/ICARE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/LIM-AeroCloud/ICARE.jl/blob/dev/docs/src/download.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Downloading-from-the-ICARE-server"><a class="docs-heading-anchor" href="#Downloading-from-the-ICARE-server">Downloading from the ICARE server</a><a id="Downloading-from-the-ICARE-server-1"></a><a class="docs-heading-anchor-permalink" href="#Downloading-from-the-ICARE-server" title="Permalink"></a></h1><h2 id="Synchronising-folder-structure"><a class="docs-heading-anchor" href="#Synchronising-folder-structure">Synchronising folder structure</a><a id="Synchronising-folder-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Synchronising-folder-structure" title="Permalink"></a></h2><p><em>ICARE.jl</em> is meant for data that is arranged by years and dates with the following structure:</p><pre><code class="nohighlight hljs">&lt;root&gt;/&lt;product folder&gt;/yyyy/yyyy_mm_dd</code></pre><p>This folder structure is synchronised with the local system and data files are downloaded to the date folders at the lowest level. To minimize server communication and speed up download processes, a local <code>.inventory.yaml</code> file (hidden on Linux and MacOs) is created in the product folder. The <code>.inventory.yaml</code> contains information about the folder structure and file stats and should not be edited or deleted. The inventory is created before the first download of a given product. This process takes several minutes up to hours in extreme cases. After the initial setup, only dates outside the known date range are updated, which is much faster, unless a complete resynchronisation is forced.</p><div class="admonition is-warning" id="Important-Notice-6cf23a8b7be86673"><header class="admonition-header">Important Notice<a class="admonition-anchor" href="#Important-Notice-6cf23a8b7be86673" title="Permalink"></a></header><div class="admonition-body"><p>Don&#39;t edit or delete the <code>.inventory.yaml</code> file in each main product folder unless you know what you are doing! The creation or resynchronisation of the inventory takes several minutes or up to hours in extreme cases.</p></div></div><div class="admonition is-info" id="Note-444db6ed89f04467"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-444db6ed89f04467" title="Permalink"></a></header><div class="admonition-body"><p>Inventories may not be nested, i.e. a product folder may not be inside another product folder.</p></div></div><h2 id="Downloading-data-files"><a class="docs-heading-anchor" href="#Downloading-data-files">Downloading data files</a><a id="Downloading-data-files-1"></a><a class="docs-heading-anchor-permalink" href="#Downloading-data-files" title="Permalink"></a></h2><p>Use the <a href="download.html#ICARE.sftp_download"><code>sftp_download</code></a> function to synchronise the AERIS/ICARE server with the local system. Mandatory arguments are the ICARE user credentials, the product, and the date span. Further fine-tuning of the downloads is possible with keyword arguments as described in the <a href="download.html#ICARE.sftp_download"><code>sftp_download</code></a> help.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ICARE.sftp_download" href="#ICARE.sftp_download"><code>ICARE.sftp_download</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sftp_download(
    user::String,
    password::String,
    product::String,
    startdate::Int,
    enddate::Int=-1;
    version::Union{Nothing,Real} = 4.51,
    remoteroot::String = &quot;/SPACEBORNE/CALIOP/&quot;,
    localroot::String = &quot;.&quot;,
    convert::Bool = true,
    resync::Bool = false,
    update::Bool = false,
    logfile::String = &quot;downloads.log&quot;,
    loglevel::Symbol = :Debug</code></pre><p>)</p><p>Download satellite data from the Aeris/ICARE server.</p><div class="admonition is-info" id="Note-3ad268592add07ab"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-3ad268592add07ab" title="Permalink"></a></header><div class="admonition-body"><p>To use <code>sftp_download</code>, an <a href="https://www.icare.univ-lille.fr">Aeris/ICARE account</a> is needed that is available for free for non-commercial use.</p></div></div><p><strong>Positional arguments</strong></p><ul><li><code>user::String</code>/<code>password::String</code>: Aeris/ICARE account credentials</li><li><code>product::String</code>: The desired product to download (matches the folder name excluding the version number, e.g., <code>05kmCPro</code>)</li><li><code>startdate::Int</code>/<code>enddate::Int</code>: The start/end date for the download period as <code>Int</code> (format: <code>yyyy[mm[dd]]</code>);</li></ul><p>In the dates, the day and month part can be omitted. In this case, the earliest possible start date is selected and the latest possible end date, e.g. <code>202003</code> will give a start date of <code>2020-03-01</code> and an end date of <code>2020-03-31</code>. The end date is optional, if omitted, the period defined by <code>startdate</code> is downloaded, either a day, or a month (if the day part is omitted) or a year (if both day and month are omitted).</p><p><strong>Keyword arguments</strong></p><ul><li><code>version::Union{Nothing,Real}</code>: The version number of the product (default: <code>4.51</code>).</li><li><code>remoteroot::String</code>: The root path on the remote server (default: <code>&quot;/SPACEBORNE/CALIOP/&quot;</code>).</li><li><code>localroot::String</code>: The root path on the local machine containing the product folder (default: <code>&quot;.&quot;</code>).</li><li><code>convert::Bool</code>: Whether or not to convert the downloaded files to another file format (default: <code>true</code>).</li><li><code>resync::Bool</code>: Whether to re-synchronize the local inventory with the remote server (default: <code>false</code>).</li><li><code>update::Bool</code>: Whether to update the local files if newer versions are available on the remote server (default: <code>false</code>).</li><li><code>logfile::String</code>: The name of the log file (default: <code>&quot;downloads.log&quot;</code>; the name will be appended by the current date and time).</li><li><code>loglevel::Symbol</code>: The log level for the download process (default: <code>:Debug</code>).</li></ul><div class="admonition is-warning" id="Warning-b098126b60e5b3ba"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-b098126b60e5b3ba" title="Permalink"></a></header><div class="admonition-body"><p>The <code>update</code> option automatically resynchronises the inventory as well.</p><p>Re-synchronisation of the inventory will take several minutes up to hours!</p></div></div><p>For custom version formats, the <code>version</code> can be set to <code>nothing</code> and included in the <code>product</code> string. By default, the product folder is constructed as <code>&lt;product&gt;.v&lt;X.XX&gt;</code> with the version as float with two decimal places independent of the input format.</p><p>By default, hdf files (version 4) are assumed as download source, which will be converted to <code>.h5</code> (HDF5) file unless <code>convert</code> is set to <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LIM-AeroCloud/ICARE.jl/blob/566d8178c379b79ad159c4d76ef1b71026c2202e/src/download.jl#L5-L66">source</a></section></article><h3 id="Specifying-the-download-product"><a class="docs-heading-anchor" href="#Specifying-the-download-product">Specifying the download product</a><a id="Specifying-the-download-product-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-the-download-product" title="Permalink"></a></h3><p>By default, CALIOP data (<code>/SPACEBORNE/CALIOP</code>) will be downloaded, but can be changed with the <code>remoteroot</code> keyword argument. Data will be downloaded to the current folder or the folder specified by <code>localroot</code>. Use the third positional argument to specify the product, you want to download. Products are assumed in the format <code>&lt;name&gt;.v.&lt;X.XX&gt;</code>, where <code>X.XX</code> is the version number with a two-digit minor version. By default, version <code>4.51</code> is assumed, but can be changed with the <code>version</code> keyword argument (e.g., upgrade to version 5 with <code>version=5</code>).</p><div class="admonition is-info" id="Note-7228539cb6a161cc"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-7228539cb6a161cc" title="Permalink"></a></header><div class="admonition-body"><p>Currently, the newest version 5 shows a significant performance decrease on the server side. Therefore, version <code>4.51</code> was chosen as the current default.</p></div></div><p>For custom formats, <code>version</code> can be set to <code>nothing</code> and the entire name and version string passed to the <code>product</code> argument.</p><h3 id="Specifying-a-date-range"><a class="docs-heading-anchor" href="#Specifying-a-date-range">Specifying a date range</a><a id="Specifying-a-date-range-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-a-date-range" title="Permalink"></a></h3><p>For convenience, dates are given as integers, so users don&#39;t have to import the <code>Dates</code> package. You can either give one date range as fourth positional argument or a start and end date as fourth and fifth positional argument.</p><p>The date format is <code>yyyy[mm[dd]]</code>, where the day and/or month part can be omitted. Defining a span is possible for:</p><ul><li>a whole year (<code>yyyy</code>)</li><li>a whole month (<code>yyyymm</code>)</li><li>a day (<code>yyyymmdd</code>)</li></ul><p>If the the day and/or month are omitted in the start or end date, they will be filled with the  earliest possible day for the <code>startdate</code> and the latest possible date for the <code>enddate</code>. </p><p>Some examples are:</p><ul><li><code>20220212</code>: Download the whole day of <code>2022-02-12</code></li><li><code>202004</code>: Download the whole April of 2020</li><li><code>2020</code>: Download the whole year 2020</li><li><code>2002, 200206</code>: Download the first half of 2002</li><li><code>200207, 2002</code>: Download the second half of 2002</li><li><code>200003, 20000315</code>: Download the first half of March 2000</li><li><code>20000316, 200003</code>: Download the second half of March 2000</li></ul><p>Only complete days can be downloaded.</p><h3 id="Updating-the-inventory"><a class="docs-heading-anchor" href="#Updating-the-inventory">Updating the inventory</a><a id="Updating-the-inventory-1"></a><a class="docs-heading-anchor-permalink" href="#Updating-the-inventory" title="Permalink"></a></h3><p>As mentioned before, updating the entire inventory including the parts already synced may take a long time and should not be necessary under normal circumstances. It can be achieved by setting <code>resync</code> to <code>true</code>.</p><p>If you want to check for updated data files on the server, you can set the <code>update</code> flag to <code>true</code>. This will also resync the complete inventory and, hence, take a long time to finish. If <code>update</code> is set, any newer file on the server compared to the modified time on the local system will be downloaded.</p><h3 id="Logging"><a class="docs-heading-anchor" href="#Logging">Logging</a><a id="Logging-1"></a><a class="docs-heading-anchor-permalink" href="#Logging" title="Permalink"></a></h3><p>Some basic information about the current download session is printed to the screen with further comprehensive information in a log file. By default, log files are saved to the product folder as <code>download_&lt;timestamp&gt;.log</code>. You can change the file name with the <code>logfile</code> keyword argument. The file name will automatically be appended with the time stamp, when the download session started. If the file name includes a path, the logfile will be saved to this path. The path can be absolute or relative to your current location (where you started your julia session or where you change to during your julia session), i.e. <code>logfile = &quot;~/icare.log&quot;</code> will create a logfile <code>icare_&lt;timeestamp&gt;.log</code> in your root directory. Note that the extension can be change as well to, e.g., <code>.txt</code> or <code>.dat</code>.</p><p>For the log file the verbosity can be set to 4 levels given as <code>Symbol</code> (with verbosity listed from least to most):</p><ul><li><code>Error</code></li><li><code>Warn</code></li><li><code>Info</code></li><li><code>Debug</code></li></ul><p>By default, all messages are printed allowing you to track the download status on screen and in the log file. The <code>Debug</code> level is used to inform about completed downloads.</p><h2 id="Converting-data-files"><a class="docs-heading-anchor" href="#Converting-data-files">Converting data files</a><a id="Converting-data-files-1"></a><a class="docs-heading-anchor-permalink" href="#Converting-data-files" title="Permalink"></a></h2><h3 id="During-download"><a class="docs-heading-anchor" href="#During-download">During download</a><a id="During-download-1"></a><a class="docs-heading-anchor-permalink" href="#During-download" title="Permalink"></a></h3><p>During an <code>sftp_download</code>, you can set the <code>convert</code> keyword argument to <code>true</code>. By default, this will save downloads in the HDF5 (<code>.h5</code>) format instead of the expected HDF4 (<code>.hdf</code>) format. You can overload the <a href="adaptation.html#ICARE.convert_file"><code>ICARE.convert_file</code></a> function, see section about <a href="adaptation.html#Converting-to-other-file-formats">Converting to other file formats</a>. However, only one or the other format will be saved.</p><div class="admonition is-success" id="Tip-d82f8b09c43835c7"><header class="admonition-header">Tip<a class="admonition-anchor" href="#Tip-d82f8b09c43835c7" title="Permalink"></a></header><div class="admonition-body"><p>If, you want both formats saved on your local machine, download the original format with <code>sftp_download</code> by setting <code>convert</code> to <code>false</code> and re-run <code>sftp_download</code> with <code>convert=true</code>. The second run will only convert the files without re-downloading them and also keep the original downloads. If your run <code>sftp_download</code> with <code>convert=true</code> the first time, original downloads are not kept.</p></div></div><h3 id="Separate-file-conversions"><a class="docs-heading-anchor" href="#Separate-file-conversions">Separate file conversions</a><a id="Separate-file-conversions-1"></a><a class="docs-heading-anchor-permalink" href="#Separate-file-conversions" title="Permalink"></a></h3><p>Routines related to file conversion without download from the AERIS/ICARE server are being refactored. <strong>They may or may not work at current.</strong></p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ICARE.hdfupgrade" href="#ICARE.hdfupgrade"><code>ICARE.hdfupgrade</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hdfupgrade(
    product::String,
    version::Float64 = 4.51;
    localroot::String = &quot;.&quot;,
    remoteroot::String = &quot;/SPACEBORNE/CALIOP&quot;,
    user::String = &quot;&quot;,
    password::String = &quot;&quot;,
    clean::Bool = false,
    h4ext::String = &quot;.hdf&quot;,
    h5ext::String = &quot;.h5&quot;,
    logfile::String = &quot;conversions.log&quot;,
    loglevel::Symbol = :Debug
)</code></pre><p>Convert all HDF4 data files to HDF5 files (with <code>h4ext</code>/<code>h5ext</code> file extensions, respectively) that are part of specified <code>product</code> in the given <code>version</code>.</p><p>To check, whether hdf files are part of the <code>product</code>, the are compared to the inventory file in the product folder in the <code>localroot</code>. Additional checks against the ICARE server can be performed with a significant increase in processing time, if the ICARE <code>user</code> name and <code>password</code> are given as well as the <code>remoteroot</code> of the product folder on the server.</p><p>By default, files are upgraded to HDF5 standard and original files are kept. If <code>clean</code> is set to <code>true</code>, the original files are deleted upon confirmation. <strong>This means that data files will have to be re-downloaded, if data files in the original HDF4 format are needed!</strong></p><p>Events of the desired <code>loglevel</code> will be logged to <code>logfile</code>. A timestamp will be added to each logfile so that a unique logfile is created for every run and logfiles are not overwritten.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/LIM-AeroCloud/ICARE.jl/blob/566d8178c379b79ad159c4d76ef1b71026c2202e/src/conversion.jl#L5-L36">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="adaptation.html">Adaptation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Sunday 31 August 2025 17:19">Sunday 31 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
